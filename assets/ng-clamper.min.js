/*
ng-clamper - git@github.com:kevinchappell/ng-clamper.git
Version: 0.0.1
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
angular.module("ng-clamper",[]).directive("ngClamper",function(){"use strict";return{scope:{ngModel:"=clamper",text:"="},restrict:"C",controller:"clamperCtrl as clamper"}}).controller("clamperCtrl",["$scope","$element",function(e,n){"use strict";function t(){var e=r.text,n=r.ngModel.end||"&hellip;",t=parseInt(r.ngModel.clamp,10),o=window.getComputedStyle(c[0],null).getPropertyValue("line-height").replace("px",""),a=function(){return{current:c[0].clientHeight||c[0].offsetHeight,closed:o*parseInt(r.ngModel.clamp,10)}},p=function(){return Math.max(Math.ceil(a().current/o),0)},g=function(){return p()>t},i=function(e){for(var t=e.length-1;g();t--)c[0].innerHTML=l.strTruncate(e,t,n)};e&&(c[0].innerHTML=e,r.ngModel.clamped===!1&&(r.ngModel.clamped=g()),i(e),r.ngModel.clampOpen?c.css("max-height","999px"):c.css("max-height",a().closed+"px"))}var l=this,c=n,r=e;l.strTruncate=function(e,n,t){var l=e.length>n,c=l?e.substr(0,n-1):e,r=c.substring(0,Math.min(c.length,c.lastIndexOf(" ")));return r+t},r.ngModel.clamped=!1,r.$watch("ngModel.clamp",t),r.$watch("text",t)}]).directive("clampToggle",function(){"use strict";return{restrict:"E",scope:{ngModel:"="},controller:"clampToggleCtrl as clampToggle"}}).controller("clampToggleCtrl",["$scope","$element",function(e,n){"use strict";function t(){c.ngModel.clampOpen?c.ngModel.clamp=c.ngModel.clampTo:c.ngModel.clamp=c.ngModel.maxClamp,c.ngModel.clampOpen=!c.ngModel.clampOpen}var l=n,c=e;l.bind("click",function(){c.$apply(t)})}]);